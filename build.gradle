buildscript {
  ext.kotlin_version = '1.2.21'
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
  }
}
apply plugin: 'kotlin'

repositories {
  mavenCentral()
}
dependencies {
  compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"
  compile "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"
  compile 'com.martiansoftware:nailgun-server:0.9.1'
  compile 'com.google.guava:guava:24.0-jre'
  compile 'org.jetbrains.kotlinx:kotlinx-coroutines-core:0.22.3'
  compile 'io.github.microutils:kotlin-logging:1.4.9'
  compile 'org.slf4j:jul-to-slf4j:1.7.25'
  runtime 'ch.qos.logback:logback-classic:1.2.3'
}
compileKotlin {
  kotlinOptions {
    jvmTarget = "1.8"
  }
}
compileTestKotlin {
  kotlinOptions {
    jvmTarget = "1.8"
  }
}
kotlin {experimental {coroutines 'enable'}}
jar {
  from {
    configurations.runtime.collect {it.isDirectory() ? it : zipTree(it)}
  }
}
